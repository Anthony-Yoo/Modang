<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="manager">
	
	<!-- 회원가입 -->
	<insert id="insertManager" parameterType="com.javaex.vo.ManagerVo">
		<![CDATA[
			insert into biliards
				values(
				    seq_biliards_no.nextval,
				    #{id},
				    #{passwd},
				    #{companyNo},
				    #{repName},
				    #{biliardName},
				    #{biliardAddress1},
				    null,
				    null,
				    #{biliardPhone},
				    #{parking},
				    #{bdComment},
				    #{time1},
				    #{time2},
				    #{biliardAddress2},
				    #{postcode}
				)
		]]>
	</insert>
	
	<!-- 로그인 -->
	<select id="selectManager" parameterType="com.javaex.vo.ManagerVo" resultType="com.javaex.vo.ManagerVo">
		<![CDATA[
			select biliardNo,
					id,
					passwd,
					repName,
					biliardName
					from biliards
					where id=#{id} and passwd=#{passwd}
		]]>
	</select>
	
	<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
		
	
		<select id="selectTableList" parameterType="int" resultType="com.modang.vo.CueTableVo">
		<![CDATA[
		select tableno,
		       biliardno,
		       tablename,
		       tabletype,
		       status as tableStatus      
		from cuetable where biliardno = #{no}
		]]>	
		
	</select>
	
	<!-- 요금 테이블 정보 가져오기 -->

	<select id="selectPrice" parameterType="int" resultType="com.modang.vo.TariffVo">
		<![CDATA[
			select biliardno,
			       btablefee,
			       mtablefee,
			       ptablefee,
			       bminfee,
			       mminfee,
			       pminfee
			from tariff
			where biliardno =#{no}
		]]>	
		
	</select>
	
	<!-- 요금 테이블 수정 -->
	<update id="updatePrice" parameterType="com.modang.vo.TariffVo">
	<![CDATA[
			update tariff set btablefee = #{btablefee},
			                  mtablefee = #{mtablefee},
			                  ptablefee = #{ptablefee},
			                  bminfee = #{bminfee},
			                  mminfee = #{mminfee},
			                  pminfee = #{pminfee}
			where biliardno=#{biliardno}
	  ]]>
	</update>

</mapper>