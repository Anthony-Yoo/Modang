<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">
	
	<!-- 쿼리문 작성 -->
<!-- 회원가입 -->
<insert id="insert" parameterType="com.modang.vo.UserVo">  
    <![CDATA[
       insert into users(userno, id, passwd, nick, cellphone, average, recentlogontime, profileimage) 
		values( SEQ_USERS_NO.nextval,
		        #{id},
		        #{passwd}, 
		        #{nick},
		        #{cellphone},
		        #{average},
		        sysdate,
		        #{profileimage}
        )
    ]]>
</insert>

<!-- 로그인 -->
<select id="selectUser" parameterType="com.modang.vo.UserVo" resultType="com.modang.vo.UserVo">
	<![CDATA[
		select  id, 
				passwd
		from users
		where id=#{id} and 
			  passwd=#{passwd}
	
	]]>

</select>

<!-- 회원수정폼 -->
<select id="selectUserByNo" parameterType="String" resultType="com.modang.vo.UserVo">
	<![CDATA[
		select id,  
			   nick,
			   cellphone, 
			   average
		from users
		where id=#{id}
				
	]]>

</select>

<!-- 회원수정 비밀번호 -->
<update id="update" parameterType="com.modang.vo.UserVo">
	<![CDATA[
		update users
			set passwd = #{passwd},
                nick = #{nick},
                cellphone = #{cellphone},
                average = #{average}
                
			where id = #{id}    
	]]>

</update>

<!-- 회원정보 id확인 -->
<select id="selectUserById" parameterType="String" resultType="com.modang.vo.UserVo">
	<![CDATA[
		select userno, id 
		from users
		where id=#{id} 	
	]]>

</select>


</mapper>