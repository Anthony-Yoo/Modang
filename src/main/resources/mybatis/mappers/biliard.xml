<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="biliard">
	<!-- 테이블상세정보 -->
		<select id="selectTableInfo" parameterType="com.modang.vo.CueTableVo" resultType="com.modang.vo.TableGamesVo">
		<![CDATA[
			select g.gameno,
			       g.tableno,
			       g.gametype,
			       g.membernum,
			       g.gamedate,
			       g.gametime,
			       g.starttime,
			       g.endtime,
			       g.paystatus,
			       g.paytype,
			       g.paydate,
			       g.income,
			       g.paymoney,
			       g.pausestart,
			       g.pausestop,
			       g.pausetime,
			       g.setno,
			       c.biliardno,
			       c.tablename,
			       c.tabletype,
			       c.status
			from games g
			full join cuetable c
			on g.tableno=c.tableno
			where g.tableno=#{tableNo} and g.paystatus='0'

		]]>	
		
	</select>

	<!-- 테이블전체리스트 -->
		<select id="selectTableList" parameterType="int" resultType="com.modang.vo.CueTableVo">
		<![CDATA[
		select tableno,
		       biliardno,
		       tablename,
		       tabletype,
		       status as tableStatus      
		from cuetable where biliardno = #{no}
		]]>	
		
	</select> 
	
	<!-- 요금 테이블 정보 가져오기 -->
	<select id="selectPrice" parameterType="int" resultType="com.modang.vo.TariffVo">
		<![CDATA[
			select biliardno,
			       btablefee,
			       mtablefee,
			       ptablefee,
			       bminfee,
			       mminfee,
			       pminfee
			from tariff
			where biliardno =#{no}
		]]>	
		
	</select>
	
	<!-- 요금 테이블 수정 -->
	<update id="updatePrice" parameterType="com.modang.vo.TariffVo">
	<![CDATA[
			update tariff set btablefee = #{btablefee},
			                  mtablefee = #{mtablefee},
			                  ptablefee = #{ptablefee},
			                  bminfee = #{bminfee},
			                  mminfee = #{mminfee},
			                  pminfee = #{pminfee}
			where biliardno=#{biliardno}
	  ]]>
	</update>

</mapper>